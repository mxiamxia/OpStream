#!/bin/bash

# Create multiple appointments to demonstrate memory leak
echo -e "\n\nCreating multiple appointments to demonstrate memory leak..."
for i in {1..200000}; do
  curl -s -X POST http://localhost:5000/createAppointment \
    -H "Content-Type: application/json" \
    -d "{
      \"patient_name\": \"Patient $i\",
      \"doctor_name\": \"Dr. Test\",
      \"appointment_date\": \"2024-01-25\",
      \"appointment_time\": \"$((9 + i % 8)):00 AM\",
      \"notes\": \"Test appointment $i - EXTREMELY LARGE MEDICAL RECORD (500KB) - This is a very long note with lots of detailed information about the patient's medical history, symptoms, previous treatments, medications, allergies, family history, and other relevant medical data that could be quite extensive. The purpose is to simulate real-world scenarios where appointment notes can contain substantial amounts of text including detailed examination findings, treatment plans, follow-up instructions, medication adjustments, lifestyle recommendations, referral information, and comprehensive documentation that healthcare providers typically maintain for proper patient care continuity. This large text block will help demonstrate memory usage patterns and potential memory leak issues in the appointment service when storing substantial amounts of data for each appointment record in the system. Additional detailed medical information includes comprehensive patient assessment, vital signs monitoring, diagnostic test results, laboratory findings, imaging study interpretations, surgical procedure notes, post-operative care instructions, rehabilitation protocols, physical therapy recommendations, occupational therapy assessments, nutritional counseling notes, psychological evaluation findings, social work assessments, discharge planning documentation, insurance authorization details, billing and coding information, quality assurance metrics, patient satisfaction surveys, care coordination communications, interdisciplinary team meeting notes, family conferences documentation, advance directive discussions, pain management protocols, medication reconciliation records, allergy verification procedures, infection control measures, fall risk assessments, pressure ulcer prevention strategies, cognitive assessments, functional capacity evaluations, home health care arrangements, durable medical equipment prescriptions, follow-up appointment scheduling, specialist referral coordination, laboratory test ordering, radiology study requests, pharmacy consultations, case management reviews, utilization management assessments, peer review documentation, clinical pathway adherence monitoring, evidence-based practice implementation, continuing education requirements, professional development activities, research participation documentation, clinical trial enrollment considerations, biomedical ethics consultations, legal compliance verification, regulatory reporting requirements, accreditation preparation materials, performance improvement initiatives, patient safety event reporting, risk management assessments, emergency preparedness protocols, disaster response procedures, business continuity planning, technology integration strategies, electronic health record optimization, interoperability standards compliance, data security measures, privacy protection protocols, HIPAA compliance verification, audit preparation documentation, vendor management oversight, contract negotiation records, budget planning materials, resource allocation strategies, staffing optimization plans, workflow efficiency improvements, customer service excellence programs, community outreach initiatives, public health collaboration efforts, population health management strategies, preventive care coordination, chronic disease management protocols, wellness program development, health promotion activities, disease prevention strategies, screening program implementation, vaccination administration records, immunization status tracking, travel health consultations, occupational health assessments, environmental health evaluations, infectious disease surveillance, outbreak investigation procedures, contact tracing protocols, quarantine management guidelines, isolation precaution implementation, antimicrobial stewardship programs, healthcare-associated infection prevention, patient education materials development, family caregiver training programs, community resource identification, social determinants assessment, health equity initiatives, cultural competency training, language interpretation services, accessibility accommodation procedures, disability rights compliance, age-specific care considerations, pediatric assessment protocols, geriatric evaluation procedures, women's health screening programs, men's health promotion activities, LGBTQ+ inclusive care practices, trauma-informed care implementation, mental health integration strategies, substance abuse treatment coordination, addiction recovery support services, crisis intervention procedures, suicide prevention protocols, domestic violence screening, elder abuse detection, child protection reporting, mandated reporter training, ethical decision-making frameworks, informed consent procedures, shared decision-making processes, patient advocacy services, grievance resolution procedures, complaint investigation protocols, satisfaction improvement initiatives, service recovery programs, communication enhancement strategies, conflict resolution techniques, negotiation skills development, leadership training programs, team building activities, staff development initiatives, mentorship program coordination, succession planning strategies, retention improvement efforts, recruitment optimization procedures, onboarding process enhancement, performance evaluation systems, competency validation programs, credentialing maintenance requirements, license renewal procedures, certification tracking systems, continuing education coordination, professional membership management, conference attendance planning, knowledge sharing initiatives, best practice dissemination, innovation implementation strategies, change management procedures, organizational development activities, strategic planning processes, mission alignment verification, vision statement implementation, value proposition development, brand management strategies, marketing communication plans, public relations coordination, media interaction protocols, crisis communication procedures, stakeholder engagement activities, community partnership development, collaborative care agreements, service line expansion planning, market analysis studies, competitive intelligence gathering, financial performance monitoring, revenue cycle optimization, cost reduction initiatives, efficiency improvement projects, productivity enhancement strategies, quality improvement programs, patient outcome measurements, clinical indicator tracking, benchmark comparison studies, peer review processes, medical staff credentialing, privileging procedures, competency assessments, performance improvement requirements. REPEATED MEDICAL DATA BLOCK 2: This comprehensive medical documentation continues with extensive patient history including previous hospitalizations, surgical procedures, diagnostic imaging results, laboratory test outcomes, specialist consultations, medication histories, adverse drug reactions, family genetic predispositions, lifestyle factors, social determinants of health, environmental exposures, occupational hazards, travel history, immunization records, screening test results, preventive care measures, chronic disease management protocols, acute care episodes, emergency department visits, intensive care admissions, rehabilitation services, home health care coordination, palliative care planning, end-of-life directives, organ donation preferences, healthcare proxy designations, insurance coverage details, prior authorization requirements, appeals processes, quality improvement initiatives, patient safety measures, infection control protocols, medication reconciliation procedures, care transition planning, discharge instructions, follow-up scheduling, patient education materials, health literacy assessments, cultural competency considerations, language interpretation needs, accessibility accommodations, transportation arrangements, financial counseling services, social work interventions, case management coordination, utilization review processes, peer review activities, credentialing verification, privileging assessments, performance improvement projects, risk management evaluations, compliance monitoring, regulatory reporting, accreditation preparation, audit documentation, vendor management oversight, contract negotiations, budget planning activities, resource allocation strategies, staffing optimization plans, workflow efficiency improvements, technology integration projects, electronic health record optimization, interoperability enhancement, data security measures, privacy protection protocols, HIPAA compliance verification, business continuity planning, disaster response procedures, emergency preparedness protocols. REPEATED MEDICAL DATA BLOCK 3: Extended documentation encompasses multidisciplinary care coordination, integrated service delivery, population health management, community partnership development, public health collaboration, wellness program implementation, health promotion activities, disease prevention strategies, screening program coordination, vaccination administration, immunization tracking, travel health consultations, occupational health assessments, environmental health evaluations, infectious disease surveillance, outbreak investigation procedures, contact tracing protocols, quarantine management, isolation precautions, antimicrobial stewardship programs, healthcare-associated infection prevention, patient education development, family caregiver training, community resource identification, social determinants assessment, health equity initiatives, cultural competency training, language interpretation services, accessibility accommodations, disability rights compliance, age-specific care protocols, pediatric assessment procedures, geriatric evaluation methods, women's health screening, men's health promotion, LGBTQ+ inclusive practices, trauma-informed care implementation, mental health integration, substance abuse treatment coordination, addiction recovery support, crisis intervention procedures, suicide prevention protocols, domestic violence screening, elder abuse detection, child protection reporting, mandated reporter training, ethical decision-making frameworks, informed consent procedures, shared decision-making processes, patient advocacy services, grievance resolution procedures, complaint investigation protocols, satisfaction improvement initiatives, service recovery programs, communication enhancement strategies, conflict resolution techniques, negotiation skills development, leadership training programs, team building activities, staff development initiatives, mentorship coordination, succession planning, retention improvement, recruitment optimization, onboarding enhancement, performance evaluation systems, competency validation programs, credentialing maintenance, license renewal procedures, certification tracking, continuing education coordination, professional membership management, conference attendance planning, knowledge sharing initiatives, best practice dissemination, innovation implementation, change management procedures, organizational development activities, strategic planning processes, mission alignment verification, vision implementation, value proposition development, brand management strategies, marketing communications, public relations coordination, media interaction protocols, crisis communication procedures, stakeholder engagement, community partnerships, collaborative agreements, service line expansion, market analysis studies, competitive intelligence, financial performance monitoring, revenue cycle optimization, cost reduction initiatives, efficiency improvement projects, productivity enhancement strategies, quality improvement programs, patient outcome measurements, clinical indicator tracking, benchmark comparisons, peer review processes, medical staff credentialing, privileging procedures, competency assessments, performance requirements. REPEATED MEDICAL DATA BLOCK 4: Comprehensive healthcare documentation extends to include advanced clinical decision support systems, evidence-based practice guidelines, clinical pathway optimization, care standardization protocols, quality measurement frameworks, outcome evaluation methodologies, risk stratification algorithms, predictive analytics models, artificial intelligence applications, machine learning implementations, natural language processing systems, clinical data mining techniques, population health analytics, epidemiological surveillance methods, biostatistical analysis procedures, health economics evaluations, cost-effectiveness assessments, budget impact analyses, resource utilization studies, capacity planning models, demand forecasting systems, supply chain optimization, inventory management protocols, procurement procedures, vendor evaluation criteria, contract negotiation strategies, performance monitoring systems, service level agreements, quality assurance programs, continuous improvement initiatives, lean management principles, six sigma methodologies, process optimization techniques, workflow redesign strategies, technology adoption frameworks, change management protocols, stakeholder engagement plans, communication strategies, training programs, competency development initiatives, performance measurement systems, feedback mechanisms, recognition programs, professional development opportunities, career advancement pathways, succession planning processes, knowledge management systems, best practice repositories, lesson learned databases, innovation incubators, research collaboration networks, academic partnerships, industry alliances, regulatory compliance frameworks, policy development procedures, governance structures, oversight mechanisms, accountability measures, transparency initiatives, public reporting requirements, patient safety organizations, quality improvement collaboratives, professional societies, accreditation bodies, certification organizations, regulatory agencies, government entities, international organizations, global health initiatives, humanitarian efforts, disaster response capabilities, emergency preparedness plans, business continuity strategies, risk management frameworks, insurance coverage options, liability protection measures, legal compliance requirements, ethical guidelines, professional standards, code of conduct policies, conflict of interest procedures, privacy protection protocols, data security measures, cybersecurity frameworks, information governance policies, records management procedures, audit trail requirements, documentation standards, reporting guidelines, communication protocols, escalation procedures, incident management systems, root cause analysis methods, corrective action plans, preventive measures, monitoring systems, evaluation criteria, performance indicators, benchmarking studies, comparative effectiveness research, outcomes research, health services research, implementation science, translational research, clinical trials, biomedical research, pharmaceutical development, medical device innovation, health technology assessment, regulatory approval processes, post-market surveillance, adverse event reporting, pharmacovigilance systems, drug safety monitoring, medical device recalls, product liability issues, intellectual property protection, patent applications, trademark registrations, copyright protections, trade secret safeguards, licensing agreements, technology transfer arrangements, commercialization strategies, market entry plans, competitive positioning, brand development, customer engagement, patient experience optimization, satisfaction measurement, loyalty programs, retention strategies, acquisition tactics, growth initiatives, expansion plans, merger considerations, acquisition opportunities, partnership negotiations, joint venture agreements, strategic alliances, collaboration frameworks, integration planning, due diligence procedures, valuation methodologies, financial analysis, investment strategies, capital allocation decisions, funding mechanisms, revenue optimization, cost management, profitability analysis, return on investment calculations, net present value assessments, internal rate of return evaluations, payback period determinations, sensitivity analyses, scenario planning, stress testing, Monte Carlo simulations, decision tree analyses, optimization models, forecasting techniques, trend analysis, market research, consumer behavior studies, demographic analyses, psychographic profiling, segmentation strategies, targeting approaches, positioning frameworks, messaging development, content creation, multimedia production, digital marketing, social media engagement, search engine optimization, pay-per-click advertising, email marketing, direct mail campaigns, telemarketing programs, trade show participation, conference presentations, publication opportunities, thought leadership initiatives, industry recognition, awards programs, certification achievements, accreditation maintenance, compliance verification, audit preparation, regulatory reporting, quality assurance, performance monitoring, continuous improvement, innovation development, research collaboration, knowledge sharing, best practice dissemination, professional development, career advancement, succession planning, talent management, workforce optimization, organizational effectiveness, cultural transformation, change management, strategic planning, operational excellence, customer satisfaction, stakeholder engagement, community involvement, social responsibility, environmental sustainability, corporate governance, ethical leadership, regulatory compliance, risk management, quality improvement, patient safety, clinical effectiveness, operational efficiency, financial performance, strategic positioning, competitive advantage, market leadership, innovation excellence, technological advancement, digital transformation, data analytics, artificial intelligence, machine learning, predictive modeling, decision support, clinical intelligence, population health, precision medicine, personalized care, patient-centered design, value-based care, outcome optimization, cost reduction, quality enhancement, safety improvement, experience elevation, satisfaction maximization, loyalty building, retention enhancement, growth acceleration, expansion facilitation, partnership development, collaboration enhancement, integration optimization, efficiency maximization, effectiveness improvement, performance enhancement, excellence achievement, leadership development, talent cultivation, capability building, competency enhancement, skill development, knowledge advancement, expertise cultivation, innovation fostering, creativity stimulation, problem-solving enhancement, decision-making improvement, strategic thinking development, operational excellence achievement, quality leadership demonstration, safety culture development, patient-centered care delivery, value creation, outcome achievement, goal attainment, objective fulfillment, mission accomplishment, vision realization, strategy execution, plan implementation, project delivery, program management, portfolio optimization, resource allocation, capacity utilization, performance maximization, efficiency optimization, effectiveness enhancement, quality improvement, safety advancement, satisfaction elevation, experience enhancement, value creation, outcome achievement, success realization, excellence attainment, leadership demonstration, innovation achievement, transformation accomplishment, growth realization, expansion success, partnership development, collaboration enhancement, integration achievement, optimization success, improvement realization, enhancement achievement, advancement accomplishment, development success, cultivation achievement, building accomplishment, fostering success, stimulation achievement, enhancement accomplishment, improvement success, development achievement, demonstration accomplishment, delivery success, creation achievement, realization accomplishment, attainment success, fulfillment achievement, accomplishment success, execution achievement, implementation accomplishment, management success, optimization achievement, allocation accomplishment, utilization success, maximization achievement, enhancement accomplishment, improvement success, advancement achievement, elevation accomplishment, creation success, achievement accomplishment, realization success, attainment achievement, demonstration accomplishment, delivery success, enhancement achievement, development accomplishment, cultivation success, building achievement, fostering accomplishment, stimulation success, improvement achievement, advancement accomplishment, demonstration success, creation achievement, realization accomplishment, success achievement.\"
    }" > /dev/null
  
  sleep 0.5
done